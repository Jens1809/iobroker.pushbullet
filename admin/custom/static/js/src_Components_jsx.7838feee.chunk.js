"use strict";(self.webpackChunkiobroker_admin_component_pushbullet=self.webpackChunkiobroker_admin_component_pushbullet||[]).push([["src_Components_jsx"],{15867:function(E,r,n){n.r(r),n.d(r,{default:function(){return C}});var c=n(4819),e=n.n(c),m=n(15854),a=n.n(m),u=n(58503),l=n(94427),p=n(59665),s=n(75606);const h=i=>({table:{minWidth:400},header:{fontSize:16,fontWeight:"bold"},selected:{backgroundColor:i.palette.mode==="dark"?"#006e23":"#1ed25d"}});class o extends s.ConfigGeneric{constructor(t){super(t),this.state={devices:[]}}componentDidMount(){super.componentDidMount(),this.props.data.apikey&&this.readData()}readData(){fetch("https://api.pushbullet.com/v2/devices",{headers:{Authorization:`Bearer ${this.props.data.apikey}`}}).then(t=>t.json()).then(t=>{t.error?window.alert(`Cannot read devices: ${t.error.message}`):this.setState({devices:t.devices||[]})}).catch(t=>window.alert(`Cannot read devices: ${t}`))}renderItem(){return e().createElement("div",{style:{width:"100%"}},e().createElement("h4",null,s.I18n.t("custom_pushbullet_title")),e().createElement(l.Button,{variant:"contained",disabled:!this.props.data.apikey,onClick:()=>this.readData()},s.I18n.t("custom_pushbullet_read_devices")),e().createElement(l.TableContainer,{component:l.Paper,style:{width:"100%"}},e().createElement(l.Table,{style:{width:"100%"},size:"small"},e().createElement(l.TableHead,null,e().createElement(l.TableRow,null,e().createElement(l.TableCell,null),e().createElement(l.TableCell,null,s.I18n.t("custom_pushbullet_name")),e().createElement(l.TableCell,null,s.I18n.t("custom_pushbullet_type")),e().createElement(l.TableCell,null,s.I18n.t("custom_pushbullet_id")))),e().createElement(l.TableBody,null,this.state.devices.map(t=>e().createElement(l.TableRow,{key:t.iden,sx:{"&:last-child td, &:last-child th":{border:0}},className:this.props.data.receivermail===t.iden?this.props.classes.selected:null},e().createElement(l.TableCell,null,this.props.data.receivermail!==t.iden&&t.nickname!=="ioBroker"?e().createElement(l.IconButton,{onClick:()=>{const d=JSON.parse(JSON.stringify(this.props.data));d.receivermail=t.iden,this.props.onChange(d,t.iden)}},e().createElement(p.Check,null)):null),e().createElement(l.TableCell,{component:"th",scope:"row"},t.type),e().createElement(l.TableCell,null,t.nickname),e().createElement(l.TableCell,null,t.iden)))))))}}o.propTypes={socket:a().object.isRequired,themeType:a().string,themeName:a().string,style:a().object,className:a().string,data:a().object.isRequired,attr:a().string,schema:a().object,onError:a().func,onChange:a().func};var b=(0,u.withStyles)(h)(o),C={PushbulletComponent:b}}}]);

//# sourceMappingURL=src_Components_jsx.7838feee.chunk.js.map